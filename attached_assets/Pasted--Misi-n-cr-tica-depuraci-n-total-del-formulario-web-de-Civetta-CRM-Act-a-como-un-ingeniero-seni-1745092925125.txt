üö® Misi√≥n cr√≠tica: depuraci√≥n total del formulario web de Civetta CRM.

Act√∫a como un ingeniero senior full stack especializado en mantenimiento de aplicaciones React + Node + Express. El objetivo es eliminar todas las versiones duplicadas del formulario de direcci√≥n de env√≠o y garantizar que se use exclusivamente la versi√≥n moderna en React, ya mejorada con validaciones, modal de confirmaci√≥n, y gesti√≥n de errores.

üß© Objetivo: Servir √∫nicamente el formulario moderno React que vive en `client/src/pages/embed/shipping-form.tsx`, el cual usa el componente `ShippingLabelForm.tsx`. Eliminar cualquier otra implementaci√≥n anterior que est√© activa o causando conflictos.

---

‚úÖ PASO 1 ‚Äî RESPALDAR Y ELIMINAR ARCHIVOS HTML OBSOLETOS

Ubicar y mover todos los siguientes archivos (si existen) a una nueva carpeta `/deprecated` dentro de `templates/shipping/`, ya que son versiones antiguas del formulario que ya no deben usarse:

- templates/shipping/shipping-form-standalone.html
- templates/shipping/wordpress-embed.html
- templates/shipping/wordpress-embed-dark.html
- templates/shipping/wordpress-embed-modern.html
- templates/shipping/wordpress-embed-standalone.html
- templates/shipping/wordpress-example-advanced.html

‚ö†Ô∏è Aseg√∫rate de que ninguna ruta del servidor est√© us√°ndolos.

---

‚úÖ PASO 2 ‚Äî CORREGIR LA RUTA /embed/shipping-form EN BACKEND

Editar `server/routes-shipping.ts` para eliminar cualquier l√≠nea similar a:

```ts
res.sendFile(path.join(__dirname, '../templates/shipping/shipping-form-standalone.html'))

Y reemplazarla por:

res.sendFile(path.join(__dirname, '../../client/dist/index.html'))

Esto asegura que /embed/shipping-form sirva el frontend compilado de React.

‚∏ª

‚úÖ PASO 3 ‚Äî ASEGURAR COMPILACI√ìN Y SERVIDOR CORRECTO

1.	Ejecutar:
cd client
npm run build

2.	Confirmar que client/dist/index.html existe y que es el build de React (debe contener <div id="root">).
3.	Asegurar que el backend lo sirva correctamente en producci√≥n desde esa carpeta. Revisar el vite.config.ts o vite.ts si se est√° usando Vite para configurar correctamente la salida del build.


‚úÖ PASO 4 ‚Äî VERIFICAR FUNCIONALIDAD Y MANTENER MEJORAS EXISTENTES

El formulario actual en ShippingLabelForm.tsx ya tiene:
	‚Ä¢	Validaci√≥n para evitar campos duplicados (c√©dula, email, tel√©fono)
	‚Ä¢	Modal elegante de confirmaci√≥n tras env√≠o exitoso
	‚Ä¢	Mensajes visuales en rojo debajo de cada campo en caso de error
	‚Ä¢	Deshabilitaci√≥n del bot√≥n ‚ÄúEnviar Informaci√≥n‚Äù mientras se procesa
	‚Ä¢	Integraci√≥n con el backend para crear cliente o pedido seg√∫n corresponda

Aseg√∫rate de que todo esto se mantenga funcionando en producci√≥n tras el cambio de ruta.


‚úÖ PASO 5 ‚Äî LIMPIAR RUTAS OBSOLETAS

En todos los archivos de server/, buscar rutas como:

router.get('/shipping-form-legacy', ...)

Y comentarlas o eliminarlas. Solo debe quedar activa la ruta /embed/shipping-form servida desde el React App compilado.

‚∏ª

‚úÖ PASO 6 ‚Äî PRUEBA FINAL Y CHECKLIST
	1.	Visitar https://[TU_URL]/embed/shipping-form
	2.	Confirmar que se muestra el formulario React moderno.
	3.	Confirmar que:
	‚Ä¢	Se validan duplicados antes de enviar.
	‚Ä¢	Se crean pedidos correctamente.
	‚Ä¢	Aparece el modal de confirmaci√≥n.
	‚Ä¢	No se pueden enviar formularios duplicados.
	‚Ä¢	No hay errores en consola.
	4.	Confirmar que en DevTools el HTML contiene: <div id="root">, no <form> plano.

‚∏ª

‚úÖ IMPORTANTE: No eliminar ni modificar ninguno de los siguientes archivos/componentes, ya que contienen la l√≥gica validada por el cliente:
	‚Ä¢	ShippingLabelForm.tsx
	‚Ä¢	Step1_PersonalData.tsx
	‚Ä¢	Step2_CustomerData.tsx
	‚Ä¢	Step3_ShippingInstructions.tsx
	‚Ä¢	Step4_Summary.tsx
	‚Ä¢	shipping-form.tsx
	‚Ä¢	api/customer.ts
	‚Ä¢	api/order.ts

‚∏ª

üõ°Ô∏è Meta: Eliminar todo rastro de formularios duplicados o legacy, mantener solamente la versi√≥n moderna en React, servirla correctamente en producci√≥n, y garantizar que todas las mejoras implementadas hasta hoy sigan funcionando correctamente. Asegura estabilidad y consistencia entre frontend y backend.

¬°Ejecuta con precisi√≥n quir√∫rgica!