Necesito que rediseÃ±es la estructura de mi CRM en Replit para mejorar la gestiÃ³n de Leads, Clientes, Pedidos y Ventas, ademÃ¡s de prepararlo para sincronizaciÃ³n con WooCommerce.

### **ğŸ“Œ Estructura Actual**
Actualmente, los datos estÃ¡n almacenados en **Key-Value Store** en archivos JSON como `customers_data.json`, pero todos los clientes estÃ¡n en una sola base sin distinciÃ³n entre Leads y Clientes. AdemÃ¡s, los pedidos y ventas no tienen almacenamiento independiente.

---

### **ğŸ”¥ Objetivo del RediseÃ±o**
1ï¸âƒ£ **Separar Leads y Clientes en archivos distintos.**  
2ï¸âƒ£ **Crear almacenamiento independiente para Pedidos y Ventas.**  
3ï¸âƒ£ **Mantener los datos actuales sin perder informaciÃ³n clave (Fuente, Marca, DirecciÃ³n, CÃ©dula, etc.).**  
4ï¸âƒ£ **Preparar la base de datos para sincronizaciÃ³n con WooCommerce.**  

---

### **ğŸ“Œ Nueva Estructura de Datos**
#### **1ï¸âƒ£ Leads (`leads_data.json`) â†’ Clientes potenciales**  
- `id` â†’ ID Ãºnico del Lead  
- `name`, `firstName`, `lastName` â†’ Nombre completo  
- `idNumber` â†’ CÃ©dula o identificaciÃ³n  
- `email`, `phone`, `phoneCountry`, `phoneNumber` â†’ Contacto  
- `street`, `city`, `province`, `deliveryInstructions` â†’ DirecciÃ³n  
- `source` â†’ CÃ³mo llegÃ³ el Lead (`Redes Sociales`, `WhatsApp`, etc.)  
- `brandInterest` â†’ `Civetta Sleepwear` o `Civetta Bride`  
- `notes` â†’ Notas sobre la personalizaciÃ³n o cita  
- `createdAt`, `updatedAt` â†’ Fechas de creaciÃ³n y actualizaciÃ³n  
- `status` â†’ Estado (`Nuevo`, `Cita Agendada`, `Pendiente`, `Convertido en Cliente`)  

ğŸ“Œ **Reglas de Leads:**  
âœ” Cuando un Lead compra algo, se mueve automÃ¡ticamente a `customers_data.json`.  

---

#### **2ï¸âƒ£ Clientes (`customers_data.json`) â†’ Personas que ya compraron**  
- **Todos los campos de Leads**, mÃ¡s:  
- `sales` â†’ Historial de compras del cliente  

ğŸ“Œ **Reglas de Clientes:**  
âœ” Un Lead se convierte en Cliente cuando realiza su primera compra.  
âœ” Un Cliente puede tener mÃºltiples pedidos y compras registradas en `sales`.  

---

#### **3ï¸âƒ£ Pedidos (`orders_data.json`) â†’ Ã“rdenes en proceso**  
- `id` â†’ ID Ãºnico del Pedido  
- `customerId` â†’ ID del Cliente o Lead  
- `source` â†’ De dÃ³nde proviene (`WooCommerce`, `WhatsApp`, `Instagram`, `Tienda FÃ­sica`)  
- `products` â†’ Lista de productos en el pedido  
- `total` â†’ Monto total del pedido  
- `status` â†’ Estado del Pedido (`Nuevo Pedido`, `Preparando`, `Enviado`, `Completado`, `Cancelado`)  
- `createdAt`, `updatedAt` â†’ Fechas de registro  

ğŸ“Œ **Reglas de Pedidos:**  
âœ” Cuando WooCommerce genera un pedido, se almacena aquÃ­ automÃ¡ticamente.  
âœ” Cuando un pedido se completa y se paga, se convierte en una Venta.  

---

#### **4ï¸âƒ£ Ventas (`sales_data.json`) â†’ Ã“rdenes confirmadas y pagadas**  
- `id` â†’ ID Ãºnico de la Venta  
- `orderId` â†’ ID del Pedido relacionado  
- `customerId` â†’ Cliente que realizÃ³ la compra  
- `total` â†’ Monto final pagado  
- `paymentMethod` â†’ `Transferencia`, `Tarjeta`, `Efectivo`  
- `status` â†’ `Pagado`, `Pendiente`, `Reembolsado`  
- `createdAt`, `updatedAt` â†’ Fechas  

ğŸ“Œ **Reglas de Ventas:**  
âœ” Solo se genera cuando un pedido se completa y se paga.  
âœ” Si una venta se devuelve, se marca como `Reembolsado`.  

---

#### **5ï¸âƒ£ Inventario (`inventory_data.json`) â†’ GestiÃ³n de Stock**  
- `id` â†’ ID Ãºnico del Producto  
- `name` â†’ Nombre del Producto  
- `brand` â†’ `Civetta Sleepwear` o `Civetta Bride`  
- `stock` â†’ Cantidad disponible  
- `price` â†’ Precio de venta  
- `lastUpdated` â†’ Ãšltima modificaciÃ³n  

ğŸ“Œ **Reglas de Inventario:**  
âœ” Si WooCommerce cambia el stock, se actualiza aquÃ­.  
âœ” Si el CRM vende un producto manualmente, WooCommerce debe reflejar el ajuste.  

---

### **ğŸ“Œ Tareas a Implementar**
1ï¸âƒ£ **Migrar los Leads actuales de `customers_data.json` a `leads_data.json` y diferenciarlos por `status`.**  
2ï¸âƒ£ **Crear `orders_data.json` y `sales_data.json` para almacenar Pedidos y Ventas sin mezclar clientes con pedidos.**  
3ï¸âƒ£ **Actualizar el CRM para registrar nuevos pedidos en `orders_data.json`, sin agregarlos directamente en Clientes.**  
4ï¸âƒ£ **Asegurar que cuando un pedido se complete y pague, se mueva a `sales_data.json`.**  
5ï¸âƒ£ **Crear endpoints API RESTful para sincronizar Pedidos y Stock con WooCommerce.**  
6ï¸âƒ£ **No perder datos clave como direcciÃ³n, fuente de origen, cÃ©dula, notas y marca de interÃ©s.**  

Genera el cÃ³digo necesario para implementar esta nueva arquitectura en el CRM y explÃ­came los cambios realizados.