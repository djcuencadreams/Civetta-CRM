<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplos Avanzados de Integración con WordPress - Civetta CRM</title>
    <style>
        /* Variables de estilo */
        :root {
            --primary: #2563eb;
            --primary-hover: #1d4ed8;
            --secondary: #475569;
            --bg-color: #f8fafc;
            --text-color: #1e293b;
            --border-color: #e2e8f0;
            --success-bg: #f0fdf4;
            --success-border: #86efac;
            --note-bg: #eff6ff;
            --note-border: #bfdbfe;
            --warning-bg: #fffbeb;
            --warning-border: #fde68a;
            --method-bg: #f8fafc;
            --code-bg: #0f172a;
        }

        /* Estilos globales */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            color: var(--text-color);
            background-color: var(--bg-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        /* Encabezado */
        header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        h1 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        /* Navegación entre ejemplos */
        .nav-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1rem;
        }

        .nav-tab {
            padding: 0.75rem 1.5rem;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }

        .nav-tab:hover {
            background-color: var(--bg-color);
            border-color: var(--primary);
        }

        .nav-tab.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Ejemplos de código */
        .example {
            margin-bottom: 3rem;
            display: none;
        }

        .example.active {
            display: block;
        }

        .example-header {
            margin-bottom: 1.5rem;
        }

        .code-block {
            background-color: var(--code-bg);
            border-radius: 0.5rem;
            padding: 1.5rem;
            overflow-x: auto;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .code-language {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            padding: 0.25rem 0.5rem;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 0.25rem;
            font-size: 0.75rem;
            color: #64748b;
        }

        code {
            color: #f8fafc;
            font-family: 'Courier New', Courier, monospace;
            white-space: pre;
            font-size: 0.875rem;
            line-height: 1.7;
        }

        .copy-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-weight: 500;
            display: block;
            margin-bottom: 2rem;
            transition: background-color 0.2s;
        }

        .copy-btn:hover {
            background-color: var(--primary-hover);
        }

        /* Notas y consejos */
        .note, .warning, .success {
            padding: 1rem;
            border-radius: 0.375rem;
            margin: 1.5rem 0;
        }

        .note {
            background-color: var(--note-bg);
            border-left: 4px solid var(--note-border);
        }

        .warning {
            background-color: var(--warning-bg);
            border-left: 4px solid var(--warning-border);
        }

        .success {
            background-color: var(--success-bg);
            border-left: 4px solid var(--success-border);
        }

        /* Demostración */
        .demo {
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            margin: 2rem 0;
            padding: 1rem;
            background-color: white;
        }

        /* Volver a guía */
        .back-link {
            display: inline-block;
            margin-top: 2rem;
            padding: 0.75rem 1.5rem;
            background-color: var(--secondary);
            color: white;
            text-decoration: none;
            border-radius: 0.375rem;
            font-weight: 500;
            transition: background-color 0.2s;
        }

        .back-link:hover {
            background-color: #334155;
        }

        /* Responsivo */
        @media (max-width: 768px) {
            .nav-tabs {
                overflow-x: auto;
                white-space: nowrap;
                flex-wrap: nowrap;
                padding-bottom: 0.5rem;
            }
            
            .nav-tab {
                flex: 0 0 auto;
                font-size: 0.875rem;
                padding: 0.5rem 1rem;
            }
            
            code {
                font-size: 0.75rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Ejemplos Avanzados de Integración</h1>
            <p>Opciones personalizadas para integrar el formulario de envío de Civetta en su tienda WordPress</p>
        </header>

        <div class="nav-tabs">
            <div class="nav-tab active" onclick="showExample('elementor')">Elementor</div>
            <div class="nav-tab" onclick="showExample('gutenberg')">Gutenberg</div>
            <div class="nav-tab" onclick="showExample('multilingual')">Multilingüe</div>
            <div class="nav-tab" onclick="showExample('custom-page')">Página Personalizada</div>
            <div class="nav-tab" onclick="showExample('ajax-load')">Carga AJAX</div>
        </div>

        <!-- Ejemplo Elementor -->
        <div id="example-elementor" class="example active">
            <div class="example-header">
                <h2>Integración con Elementor</h2>
                <p>Utilice el widget HTML de Elementor para una integración perfecta con el constructor de páginas más popular.</p>
            </div>

            <div class="note">
                <strong>Recomendado:</strong> Esta integración funciona mejor con la opción de iframe para evitar conflictos con los estilos de Elementor.
            </div>

            <h3>Pasos para integrar:</h3>
            <ol>
                <li>Edite su página con Elementor</li>
                <li>Agregue un nuevo widget "HTML" a su diseño</li>
                <li>Copie y pegue el siguiente código en el widget:</li>
            </ol>

            <div class="code-block">
                <div class="code-language">HTML</div>
                <code>&lt;iframe 
  src="https://clothing-sales-tracker-jaradanny.replit.app/wordpress-embed" 
  width="100%" 
  height="1200px" 
  style="border:none;overflow:hidden;" 
  scrolling="no"
  frameborder="0"&gt;
&lt;/iframe&gt;</code>
            </div>

            <button class="copy-btn" onclick="copyCode('elementor')">Copiar Código</button>

            <h3>Ajustes adicionales para Elementor:</h3>
            <ul>
                <li>Para dispositivos móviles, considere añadir clases responsivas de Elementor</li>
                <li>Puede ajustar el alto del iframe (height) dependiendo de su contenido</li>
                <li>Para eliminar márgenes adicionales, configure el widget HTML sin márgenes ni relleno en la pestaña "Avanzado"</li>
            </ul>
        </div>

        <!-- Ejemplo Gutenberg -->
        <div id="example-gutenberg" class="example">
            <div class="example-header">
                <h2>Integración con Gutenberg</h2>
                <p>Utilice el bloque "HTML personalizado" para integrar el formulario en el editor de bloques nativo de WordPress.</p>
            </div>

            <h3>Pasos para integrar:</h3>
            <ol>
                <li>Edite su página usando el editor Gutenberg</li>
                <li>Agregue un nuevo bloque de tipo "HTML personalizado"</li>
                <li>Copie y pegue el siguiente código en el bloque:</li>
            </ol>

            <div class="code-block">
                <div class="code-language">HTML</div>
                <code>&lt;!-- wp:html --&gt;
&lt;iframe 
  src="https://clothing-sales-tracker-jaradanny.replit.app/wordpress-embed" 
  width="100%" 
  height="1200px" 
  style="border:none;overflow:hidden;" 
  scrolling="no"
  frameborder="0"&gt;
&lt;/iframe&gt;
&lt;!-- /wp:html --&gt;</code>
            </div>

            <button class="copy-btn" onclick="copyCode('gutenberg')">Copiar Código</button>

            <div class="warning">
                <strong>Consejo:</strong> Si está utilizando un tema con estilos específicos para Gutenberg, puede ser necesario ajustar el ancho máximo del bloque en la configuración del bloque.
            </div>
        </div>

        <!-- Ejemplo Multilingüe -->
        <div id="example-multilingual" class="example">
            <div class="example-header">
                <h2>Soporte Multilingüe (WPML/Polylang)</h2>
                <p>Aprenda a integrar el formulario en sitios WordPress multilingües utilizando los plugins más populares.</p>
            </div>

            <h3>WPML - Configuración Recomendada:</h3>
            <ol>
                <li>Cree una página para cada idioma usando WPML</li>
                <li>En cada página, use un shortcode personalizado que detecte el idioma actual</li>
                <li>Agregue este código PHP a su archivo functions.php o un plugin personalizado:</li>
            </ol>

            <div class="code-block">
                <div class="code-language">PHP</div>
                <code>// Añadir a functions.php o plugin personalizado
add_shortcode('civetta_shipping_form', 'civetta_shipping_form_shortcode');

function civetta_shipping_form_shortcode() {
    // Detectar idioma actual usando WPML
    $current_language = apply_filters('wpml_current_language', NULL);
    $output = '';
    
    // Seleccionar formulario según idioma
    switch($current_language) {
        case 'en':
            // URL para versión en inglés (si estuviera disponible)
            $form_url = 'https://clothing-sales-tracker-jaradanny.replit.app/wordpress-embed';
            break;
        case 'es':
        default:
            // URL para versión en español
            $form_url = 'https://clothing-sales-tracker-jaradanny.replit.app/wordpress-embed';
            break;
    }
    
    // Generar HTML del iframe
    $output .= '&lt;iframe ';
    $output .= 'src="' . esc_url($form_url) . '" ';
    $output .= 'width="100%" ';
    $output .= 'height="1200px" ';
    $output .= 'style="border:none;overflow:hidden;" ';
    $output .= 'scrolling="no" ';
    $output .= 'frameborder="0"&gt;';
    $output .= '&lt;/iframe&gt;';
    
    return $output;
}</code>
            </div>

            <button class="copy-btn" onclick="copyCode('multilingual')">Copiar Código</button>

            <h3>Uso del Shortcode:</h3>
            <div class="code-block">
                <div class="code-language">Shortcode</div>
                <code>[civetta_shipping_form]</code>
            </div>
            
            <div class="note">
                <strong>Importante:</strong> Si el formulario está disponible en varios idiomas, puede modificar la URL en el switch-case para apuntar a diferentes versiones.
            </div>
        </div>

        <!-- Ejemplo Página Personalizada -->
        <div id="example-custom-page" class="example">
            <div class="example-header">
                <h2>Integración en Plantilla de Página Personalizada</h2>
                <p>Cree una plantilla de página completamente personalizada para el formulario de envío.</p>
            </div>

            <h3>Pasos para crear una plantilla personalizada:</h3>
            <ol>
                <li>Cree un nuevo archivo en su tema llamado <code style="color:#0f172a;">page-shipping.php</code></li>
                <li>Copie y pegue el siguiente código:</li>
            </ol>

            <div class="code-block">
                <div class="code-language">PHP</div>
                <code>&lt;?php
/**
 * Template Name: Formulario de Envío Civetta
 * Description: Plantilla personalizada para el formulario de envío
 */

get_header();
?>

&lt;div class="civetta-shipping-container"&gt;
    &lt;h1&gt;&lt;?php the_title(); ?&gt;&lt;/h1&gt;
    
    &lt;!-- Descripción opcional de la página --&gt;
    &lt;div class="civetta-description"&gt;
        &lt;?php the_content(); ?&gt;
    &lt;/div&gt;
    
    &lt;!-- Formulario de Envío Civetta --&gt;
    &lt;div class="civetta-form-wrapper"&gt;
        &lt;iframe 
            src="https://clothing-sales-tracker-jaradanny.replit.app/wordpress-embed" 
            width="100%" 
            height="1200px" 
            style="border:none;overflow:hidden;" 
            scrolling="no"
            frameborder="0"&gt;
        &lt;/iframe&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
    .civetta-shipping-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 2rem 1rem;
    }
    
    .civetta-description {
        margin-bottom: 2rem;
    }
    
    @media (max-width: 768px) {
        .civetta-shipping-container {
            padding: 1rem;
        }
    }
&lt;/style&gt;

&lt;?php get_footer(); ?&gt;</code>
            </div>

            <button class="copy-btn" onclick="copyCode('custom-page')">Copiar Código</button>

            <h3>Para utilizar esta plantilla:</h3>
            <ol>
                <li>Suba el archivo <code style="color:#0f172a;">page-shipping.php</code> a la carpeta de su tema</li>
                <li>Cree una nueva página en WordPress</li>
                <li>En la barra lateral derecha, en "Atributos de página", seleccione "Formulario de Envío Civetta" como plantilla</li>
                <li>Publique la página</li>
            </ol>
        </div>

        <!-- Ejemplo Carga AJAX -->
        <div id="example-ajax-load" class="example">
            <div class="example-header">
                <h2>Carga del Formulario con AJAX</h2>
                <p>Cargue el formulario de envío dinámicamente cuando sea necesario para mejorar el rendimiento de la página.</p>
            </div>

            <h3>Implementación con jQuery:</h3>
            <div class="code-block">
                <div class="code-language">JavaScript</div>
                <code>// Añadir este código en un archivo JavaScript personalizado o en footer.php
jQuery(document).ready(function($) {
    // Contenedor donde se cargará el formulario
    const formContainer = $("#civetta-shipping-container");
    
    // Botón que activará la carga del formulario
    $("#load-shipping-form").on("click", function() {
        // Mostrar spinner de carga
        formContainer.html('&lt;div class="loading-spinner"&gt;Cargando formulario...&lt;/div&gt;');
        
        // Crear y cargar el iframe dinámicamente
        const iframe = $('&lt;iframe&gt;', {
            src: 'https://clothing-sales-tracker-jaradanny.replit.app/wordpress-embed',
            width: '100%',
            height: '1200px',
            frameborder: 0,
            scrolling: 'no',
            style: 'border:none;overflow:hidden;'
        });
        
        // Cuando el iframe termine de cargar, quitar spinner
        iframe.on('load', function() {
            $(".loading-spinner").remove();
        });
        
        // Agregar iframe al contenedor
        formContainer.append(iframe);
        
        // Ocultar el botón después de cargar
        $(this).hide();
    });
});</code>
            </div>

            <button class="copy-btn" onclick="copyCode('ajax-load')">Copiar Código</button>

            <h3>HTML correspondiente:</h3>
            <div class="code-block">
                <div class="code-language">HTML</div>
                <code>&lt;!-- Añadir este código en su página o publicación --&gt;
&lt;div class="civetta-shipping-wrapper"&gt;
    &lt;button id="load-shipping-form" class="button button-primary"&gt;Cargar Formulario de Envío&lt;/button&gt;
    &lt;div id="civetta-shipping-container"&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
    .loading-spinner {
        text-align: center;
        padding: 2rem;
        background-color: #f8fafc;
        border-radius: 0.5rem;
    }
    
    #load-shipping-form {
        margin-bottom: 1rem;
    }
&lt;/style&gt;</code>
            </div>

            <button class="copy-btn" onclick="copyCode('ajax-html')">Copiar Código HTML</button>

            <div class="success">
                <strong>Beneficio:</strong> La carga bajo demanda mejora el tiempo de carga inicial de la página y solo carga el formulario cuando el usuario realmente lo necesita.
            </div>
        </div>

        <a href="https://clothing-sales-tracker-jaradanny.replit.app/wordpress-guide" class="back-link">← Volver a la Guía de Integración</a>
    </div>

    <script>
        function showExample(id) {
            // Ocultar todos los ejemplos
            document.querySelectorAll('.example').forEach(example => {
                example.classList.remove('active');
            });
            
            // Mostrar el ejemplo seleccionado
            document.getElementById('example-' + id).classList.add('active');
            
            // Actualizar tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Encontrar el tab correspondiente y activarlo
            event.target.classList.add('active');
        }
        
        function copyCode(exampleId) {
            let codeText = '';
            
            // Obtener el texto dependiendo del ejemplo seleccionado
            switch(exampleId) {
                case 'elementor':
                    codeText = document.querySelector('#example-elementor .code-block code').textContent;
                    break;
                case 'gutenberg':
                    codeText = document.querySelector('#example-gutenberg .code-block code').textContent;
                    break;
                case 'multilingual':
                    codeText = document.querySelector('#example-multilingual .code-block code').textContent;
                    break;
                case 'custom-page':
                    codeText = document.querySelector('#example-custom-page .code-block code').textContent;
                    break;
                case 'ajax-load':
                    codeText = document.querySelector('#example-ajax-load .code-block code').textContent;
                    break;
                case 'ajax-html':
                    codeText = document.querySelector('#example-ajax-load .code-block:nth-of-type(2) code').textContent;
                    break;
            }
            
            // Crear un elemento temporal para copiar el texto
            const el = document.createElement('textarea');
            el.value = codeText;
            el.setAttribute('readonly', '');
            el.style.position = 'absolute';
            el.style.left = '-9999px';
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            
            // Cambiar el texto del botón temporalmente
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = '¡Copiado!';
            setTimeout(() => {
                button.textContent = originalText;
            }, 2000);
        }
    </script>
</body>
</html>